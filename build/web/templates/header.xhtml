<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"> 
    <h:body>

        <nav id="top-nav">
            <div class="container">
                <div class="pull-left">
                    <c:if test="#{korisnikBean.korisnik eq null}">
                        Zdravo.
                        <b:link outcome="prijava" styleClass="top-nav-link">Ulogujte se</b:link>
                    </c:if>
                    <c:if test="#{korisnikBean.korisnik != null}">
                        <c:if test="#{korisnikBean.korisnik.tip == 2}">
                            <h:form>
                                <div class="pull-left">
                                    <ul class="list-inline">
                                        <li>
                                            <b:commandLink action="organizacija?faces-redirect=true" styleClass="top-nav-link" style="font-weight: normal">
                                                <h:outputText value="Profil" />
                                                <f:setPropertyActionListener target="#{organizacijaBean.organizacija}" value="#{korisnikBean.korisnik.organizacije}" />
                                            </b:commandLink>
                                        </li>
                                        <li>
                                            <b:commandLink action="#{korisnikBean.logout()}" styleClass="top-nav-link" style="font-weight: normal">
                                                <h:outputText value="Izlogujte se" style="font-weight: bold" />
                                            </b:commandLink>
                                        </li>
                                    </ul>
                                </div>
                            </h:form>
                        </c:if>
                        <c:if test="#{korisnikBean.korisnik.tip == 1}">
                            <h:form>
                                <div class="pull-left">
                                    <ul class="list-inline">
                                        <li>
                                            <b:commandLink action="#{korisnikBean.logout()}" styleClass="top-nav-link" style="font-weight: normal">
                                                <h:outputText value="Izlogujte se" style="font-weight: bold" />
                                            </b:commandLink>
                                        </li>
                                    </ul>
                                </div>
                            </h:form>
                        </c:if>
                    </c:if>
                </div>
                <div class="pull-right">
                    <ul class="list-inline">
                        <li>
                            <a href="#" class="top-nav-link" style="font-weight: normal">O nama</a>
                        </li>
                        <li>
                            <a href="#" class="top-nav-link" style="font-weight: normal">PomoÄ‡</a>
                        </li>
                        <li>
                            <a href="#" class="top-nav-link" style="font-weight: normal">Kontakt</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <h:form id="pretraga_vesti">

            <b:modal id="amodal" title="Filter Pretrage" styleClass="modalPseudoClass">

                <div class="stripe-line-header">
                    <div class="stripe-line-header-content">kategorija</div>
                </div>

                <div class="row search-type-option" style="padding-top: 20px; padding-bottom: 30px">
                    <ui:repeat value="#{pretragaVesti.kategorijeVesti}" var="kategorija">
                        <div class="col-md-4 event-type-option">
                            <div class="custom-checkbox #{pretragaVesti.checkMap[kategorija] ? 'custom-checkbox-checked' : 'custom-checkbox-unchecked'}">
                                <b:selectBooleanCheckbox id="kategorijaVesti" value="#{pretragaVesti.checkMap[kategorija]}" styleClass="custom-checkbox-bootsfaces filterPretrageKatCheckbox" />
                            </div><br/>
                            #{kategorija.naziv}
                        </div>
                    </ui:repeat>
                </div>

                <div class="stripe-line-header" style="margin-top: 20px">
                    <div class="stripe-line-header-content">Organizacija</div>
                </div>

                <div class="custom-select">
                    <b:selectOneMenu id="organizacija" value="#{pretragaVesti.kreatorVesti}" styleClass="place-select" select2="true">
                        <f:selectItem itemLabel="Sve organizacije" itemValue="" />
                        <f:selectItems value="#{pretragaVesti.organizacije}" var="organizacija" itemLabel="#{organizacija.korisnickoIme}" itemValue="#{organizacija.korisnickoIme}" />
                    </b:selectOneMenu>
                </div>

                <div class="stripe-line-header">
                    <div class="stripe-line-header-content">Datum kreiranja vesti</div>
                </div>

                <b:datepicker id="datum" mode='popup-icon' styleClass="custom-datepicker-bootsfaces"
                              placeholder='Izaberite datum kreiranja vesti'
                              value="#{pretragaVesti.datum}" />

                <div class="stripe-line-header" style="margin-top: 20px">
                    <div class="stripe-line-header-content">Sortiraj</div>
                </div>

                <div class="custom-select">
                    <b:selectOneMenu id="sortiranje" value="#{pretragaVesti.sortiranje}" styleClass="place-select">
                        <f:selectItem itemLabel="Datumu kreiranja - novije" itemValue="1" />
                        <f:selectItem itemLabel="Datumu kreiranja - starije" itemValue="2" />
                    </b:selectOneMenu>
                </div>

                <script>
                    $(document).ready(function () {
                        $("#pretraga_vesti\\:amodal").removeAttr("tabindex");
                    });
                </script>

                <f:facet name="footer">
                    <b:button value="Zatvori" look="primary" dismiss="modal" styleClass="big-red-button" />
                </f:facet>
            </b:modal>

            <nav id="nav-middle">
                <div class="container">
                    <div class="col-md-5 logo-col">
                        <h:graphicImage library="img" name="logo3.png" class="nav-logo" />
                    </div>
                    <div class="col-md-7" style="padding: 0px">
                        <div class="col-md-6 search-col-1">
                            <b:selectOneMenu id="organizacijaPretraga" value="#{pretragaOrganizacija.organizacija}" styleClass="place-select" select2="true"
                                             onchange="ajax:pretragaOrganizacija.pretraziOrganizaciju()">
                                <f:selectItem itemLabel="Pretraga organizacija" itemValue="#{null}" />
                                <f:selectItems value="#{pretragaVesti.organizacije}" var="organizacija" itemLabel="#{organizacija.korisnickoIme}" itemValue="#{organizacija}" />
                            </b:selectOneMenu>
                        </div>
                        <div class="col-md-6 search-col-2">
                            <table style="width: 100%; height: 38px">
                                <tr>
                                    <td>
                                        <button type="button" class="filter-button" data-target="#pretraga_vesti\:amodal" data-toggle="modal">Filter</button>
                                    </td>
                                    <td style="width: 100%">
                                        <b:inputText id="kljucne_reci" value="#{pretragaVesti.kljucneReci}" class="search-input-text" placeholder="Pretraga vesti" />
                                    </td>
                                    <td>
                                        <b:commandButton icon="search" 
                                                         class="search-button" 
                                                         action="vesti?faces-redirect=true"
                                                         ajax="true">
                                            <f:setPropertyActionListener target='#{pretragaVesti.tipPretrage}' value='3' />
                                        </b:commandButton>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </nav>

        </h:form>

        <nav></nav>

        <nav class="navbar navbar-default" role="navigation">

            <div class="collapse navbar-collapse" id="navbar-categories">
                <ul class="nav navbar-nav">
                    <ui:repeat value="#{pretragaVesti.kategorijeVesti}" var="kategorijaVest" >
                        <li>
                            <h:form>
                                <b:commandLink action="vesti?faces-redirect=true">
                                    <h:graphicImage library="img" name="ikonice/#{kategorijaVest.ikonica}" class="cultural-icon" />
                                    <br/>
                                    <span>#{kategorijaVest.naziv}</span>
                                    <f:setPropertyActionListener target="#{pretragaVesti.kategorijaVesti}" value="#{kategorijaVest}" />
                                    <f:setPropertyActionListener target="#{pretragaVesti.tipPretrage}" value="1" />
                                </b:commandLink>
                            </h:form>
                        </li>
                    </ui:repeat>
                </ul>
            </div>

        </nav>
    </h:body>
</html>
